import { Injectable } from "@snap/ts-inject";
import { lensCoreFactory } from "../lens-core-module/loader/lensCoreFactory";
import { getLogger } from "../logger/logger";
import { isGeoData } from "./geoDataProvider";
import { geoDataProviderFactory } from "./geoDataProvider";
const logger = getLogger("registerGeoDataProvider");
export const registerGeoDataProvider = Injectable("registerGeoDataProvider", [lensCoreFactory.token, geoDataProviderFactory.token], (lensCore, getGeoData) => {
    if (!lensCore.setGeoDataProvider) {
        logger.warn("setGeoDataProvider is not defined.");
        return;
    }
    lensCore.setGeoDataProvider(() => {
        const geoData = getGeoData();
        if (geoData) {
            if (!isGeoData(geoData)) {
                throw new Error("Expected GeoData object.");
            }
            lensCore.provideGeoData({ geoData });
        }
    });
});
//# sourceMappingURL=registerGeoDataProvider.js.map