import { defer, finalize, tap } from "rxjs";
export function unsubscribed(callback) {
    return (source) => defer(() => {
        let completedOrErrored = false;
        return source.pipe(tap({
            complete: () => (completedOrErrored = true),
            error: () => (completedOrErrored = true),
        }), finalize(() => {
            if (completedOrErrored)
                return;
            callback();
        }));
    });
}
//# sourceMappingURL=unsubscribed.js.map