import { Injectable } from "@snap/ts-inject";
import { getCameraKitUserAgent } from "../platform/cameraKitUserAgent";
import { configurationToken } from "../configuration";
import { defaultFetchHandlerFactory } from "./defaultFetchHandler";
import { HandlerChainBuilder } from "./HandlerChainBuilder";
import { createHeadersModifyingFetchHandler } from "./headersModifyingFetchHandler";
export const cameraKitServiceFetchHandlerFactory = Injectable("cameraKitServiceFetchHandler", [configurationToken, defaultFetchHandlerFactory.token], ({ apiToken }, defaultFetchHandler) => {
    return new HandlerChainBuilder(defaultFetchHandler).map(createHeadersModifyingFetchHandler((headers) => {
        headers.append("x-snap-client-user-agent", getCameraKitUserAgent());
        headers.append("authorization", `Bearer ${apiToken}`);
        return headers;
    })).handler;
});
//# sourceMappingURL=cameraKitServiceFetchHandlerFactory.js.map